<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  /**
   * @param {number} n
   * @return {number[][]}
   */
  var f = generateMatrix = function(n) {
    const matrix = new Array(n).fill(0).map(x => new Array(n));
    let num = 1;
    const gen = (sY, sX, maxY, maxX) => {
      if (sY > maxY || sX > maxX) return;
      if (sY === maxY || sX === maxX) {
        matrix[sY][sX] = num++;
        return;
      }
      let [y, x] = [sY, sX];
      while(x <= maxX) {
        matrix[y][x++] = num++;
      }
      x = maxX;
      y = sY + 1;
      while(y <= maxY) {
        matrix[y++][x] = num++;
      }
      y = maxY;
      x = maxX - 1;
      while(x >= sX) {
        matrix[y][x--] = num++;
      }
      y = maxY - 1;
      x = sX;
      while(y >= sY + 1) {
        matrix[y--][x] = num++;
      }
      gen(sY + 1, sX + 1, maxY - 1, maxX - 1);
    };
    gen(0, 0, n - 1, n - 1);
    return matrix;
  };
</script>
</body>
</html>