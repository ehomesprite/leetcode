<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  /**
   * Definition for isBadVersion()
   *
   * @param {integer} version number
   * @return {boolean} whether the version is bad
   * isBadVersion = function(version) {
   *     ...
   * };
   */

  /**
   * @param {function} isBadVersion()
   * @return {function}
   */
  var solution = function(isBadVersion) {
    /**
     * @param {integer} n Total versions
     * @return {integer} The first bad version
     */
    return function(n) {
      if (isBadVersion(1)) return 1;
      let [l, r] = [1, n];
      if (!isBadVersion(r)) return 0;

      while(l < r) {
        if (l === r - 1) return r;
        const m = Math.floor((l + r) / 2);
        if (isBadVersion(m)) r = m;
        else l = m;
      }
    };
  };

  const f = (n, bad) => {
    const isBadVersion = (n) => n >= bad
    const find = solution(isBadVersion);
    console.log('result:', find(n));
  };
</script>
</body>
</html>